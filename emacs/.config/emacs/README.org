** essentials
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package emacs
  :custom
  (tool-bar-mode nil)
  (tooltip-mode nil)
  (menu-bar-mode nil)
  (scroll-bar-mode nil)
  (blink-cursor-mode nil)
  (make-backup-files nil)
  (auto-save-default nil)
  (use-dialog-box nil)
  (initial-startup-screen nil)
  (initial-scratch-message nil)
  (ring-bell-function 'ignore)
  (fringe-mode 0)
  (tab-width 2)
  (standard-indent 2)
  (global-visual-line-mode t)
  (initial-major-mode 'fundamental-mode)
  (electric-indent-inhibit t)
  (inhibit-startup-message t)
  (scroll-conservatively 101)
  (use-short-answers t)
  (tab-always-indent 'complete)
  (sentence-end-double-space nil)
  (ispell-dictionary "english")
  (gc-cons-threshold (* 128 1024 1024))
	(kill-buffer-query-functions nil)
  ;; modeline
  (display-time-mode t)
  (display-time-format "%H:%M %a %d %b")
  (display-time-default-load-average nil)
  (display-time-interval 1)
  (mode-line-format
   '(
     (:eval
      (when (mode-line-window-selected-p)
	"%b"
	))
     ;; right side
     mode-line-format-right-align
     (:eval
      (when (mode-line-window-selected-p)
	display-time-string))))
  :config
  ;; theme and fonts
  (load-theme 'modus-vivendi-tritanopia)
	(add-to-list 'default-frame-alist '(alpha-background . 90))
  (add-to-list 'default-frame-alist
	       '(font . "DejaVu Sans Mono-10"))
  ;; speed
  (defun start/display-startup-time ()
    (message "Emacs loaded in %s with %d garbage collections."
	     (format "%.2f seconds"
		     (float-time
		      (time-subtract after-init-time before-init-time)))
	     gcs-done))
  ;; replace the open read only
  :bind (
	 ("C-x C-r" . (lambda () (interactive)
		       (org-babel-tangle-file "~/alchemy/dotfiles/emacs/.config/emacs/README.org")
		       (load-file user-init-file)))
	 ("s-x" . (lambda () (interactive)
		    (find-file "~/alchemy/dotfiles/guix/.config/guix/home.scm")))
	 ("s-c" . (lambda () (interactive)
		    (find-file "~/alchemy/dotfiles/emacs/.config/emacs/README.org")))
	 ("C-x C-q" . app-launcher-run-app)
	 )
  :hook
  (emacs-startup-hook . start/display-startup-time)
  (before-save-hook . whitespace-cleanup)
	)
#+end_src
* dired
why is =:hook (hl-line-mode dired-hide-details-mode)= not working (sauce [[info:use-package#Hooks][use-package#Hooks]])
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package dired
  :hook
  (dired-mode . dired-hide-details-mode)
  (dired-mode . hl-line-mode)
  :custom
  (dired-listing-switches "-Alh --group-directories-first")
  (dired-hide-details-hide-symlink-targets nil)
  (dired-auto-revert-buffer t)
  (dired-free-space nil)
  (dired-kill-when-opening-new-dired-buffer t)
  (dired-recursive-copies  'always)
  (dired-recursive-deletes 'always)
  (shell-command-guess-open "mpv")) ;; used by dired-do-open (emacs-30)
#+end_src
* org
add property headers for mkdirp and tangle
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package org
  :custom
  (org-return-follows-link t)
  (org-startup-folded 'content)
  (org-src-fontify-natively t)
  (org-src-preserve-indentation t)
  (org-ellipsis " ")
  (org-agenda-files '("~/alchemy/insanity/")))
(use-package org-agenda
  :custom
  (org-agenda-include-diary t))
(use-package calendar
  :hook
  (calendar-mode . diary-mark-entries)
  :custom
  (diary-number-of-entries 7)
  (org-agenda-include-diary t))
(use-package org-modern
  :custom
	(org-modern-star '("◉" "○" "◈" "◇" "*"))
  (org-modern-checkbox nil)
  :init
  (global-org-modern-mode))
#+end_src
* visuals
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package modus-themes
  :config
  (modus-themes-with-colors
    (set-face-attribute 'mode-line nil
			:foreground fg-main
			:background bg-main
			:box nil)
    (set-face-attribute 'mode-line-inactive nil
			:foreground fg-main
			:background bg-main
			:box nil)))
(use-package guix-prettify
  :hook (dired-mode eshell-mode))
(use-package pulsar
  :custom
  (pulsar-face 'pulsar-red)
  (pulsar-highlight-face 'pulsar-red)
  (pulsar-global-mode t))
(use-package rainbow-mode
  :init
  (rainbow-mode))
(use-package emojify
  :init
  (global-emojify-mode))
#+end_src
* packages
** prog
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package prog-mode
  :custom
  (global-prettify-symbols-mode t))
#+end_src
** wind move
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package windmove
  :config
  (windmove-default-keybindings 'ctrl))
#+end_src
** electric pair
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package elec-pair
  :custom
  (electric-pair-mode t))
#+end_src
** autorevert
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package autorevert
  :custom
  (global-auto-revert-mode t))
#+end_src
** which
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package which-key
  :custom
  (which-key-allow-evil-operators t)
  (which-key-show-operator-state-maps t)
  :init
  (which-key-mode))
#+end_src
** gnus
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package gnus
  :hook
  (gnus-group-mode-hook . gnus-topic-mode)
  :custom
  ;; personal info
  (user-full-name "Sunless")
  (user-mail-address "sunlesskelv@gmail.com")
  ;; No primary server:
  (gnus-select-method '(nnnil ""))
  ;; main news
  (gnus-secondary-select-methods '(
				   (nnimap "gmail"
					   (nnimap-address "imap.gmail.com")
					   (nnimap-server-port 993)
					   (nnimap-stream ssl))
				   (nntp "gwene" (nntp-address "news.gwene.org"))
				   )
				 )
  ;; mail locations
  (gnus-directory "~/.config/emacs/news")
  (message-directory "~/.config/emacs/mail")
  (nnfolder-directory "~/.config/emacs/mail/archive")
  ;; random
  (gnus-interactive-exit nil)
  (gnus-asynchronous t)

  ;; sending mail
  (message-send-mail-function 'smtpmail-send-it)
  (smtpmail-default-smtp-server "smtp.gmail.com")
  (smtpmail-smtp-service 587))
#+end_src
** newsticker
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package newsticker
  :custom
  (newsticker-url-list '(
			 ;; emacs
			 ("Planet Emacslife" "https://planet.emacslife.com/atom.xml")
			 ("Mastering Emacs" "http://www.masteringemacs.org/feed/")
			 ("Oremacs" "https://oremacs.com/atom.xml")
			 ("EmacsCast" "https://pinecast.com/feed/emacscast")
			 ("Emacs TIL" "https://emacstil.com/feed.xml")
			 ("Xenodium" "https://xenodium.com/rss")
			 ("lemmy" "https://lemmy.ml/feeds/c/emacs.xml?sort=Active")
			 ("null" "http://nullprogram.com/feed/")
			 ("50ply" "http://www.50ply.com/atom.xml")
			 ("nedroid" "http://nedroid.com/feed/")
			 ("luke smith" "https://lukesmith.xyz/rss.xml")
			 ;; reddit
			 ("emacs" "https://www.reddit.com/r/emacs.rss")
			 ("guix" "https://www.reddit.com/r/guix.rss")
			 ("linux" "https://www.reddit.com/r/linux.rss")
			 ("commandline" "https://www.reddit.com/r/commandline.rss")
			 ("linuxadmin" "https://www.reddit.com/r/linuxadmin.rss")
			 ("sysadmin" "https://www.reddit.com/r/sysadmin.rss")
			 ("coding" "https://www.reddit.com/r/coding.rss")
			 ("programming" "https://www.reddit.com/r/programming.rss")
			 ("learn programming" "https://www.reddit.com/r/learnprogramming.rss")
			 ("compsci" "https://www.reddit.com/r/compsci.rss")
			 ("computer science" "https://www.reddit.com/r/ComputerScience.rss")
			 ("rust" "https://www.reddit.com/r/rust.rss")
			 ;;articles
			 ("tecmint" "https://morss.it/https://www.tecmint.com/feed/")
			 ("itsfoss" "https://morss.it/https://itsfoss.com/rss/")
			 ("hackaday" "https://morss.it/feeds.feedburner.com/hackaday")
			 ("guardian" "https://morss.it/https://www.theguardian.com/uk/technology/rss")
			 ("soydev medium" "https://morss.it/https://medium.com/feed/tag/software-development")
			 ("tech medium" "https://morss.it/https://medium.com/feed/tag/technology")
			 ("hn newest" "https://morss.it/https://hnrss.org/newest")
			 ("hn front" "https://morss.it/https://hnrss.org/frontpage")
			 ("hn best" "https://morss.it/https://hnrss.org/best")
			 )))
#+end_src
** proced
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package proced
  :custom
  (proced-auto-update-flag t)
  (proced-enable-color-flag t))
#+end_src
** spelling
install ispell and dictionaary
#+begin_src emacs-lisp
(use-package flyspell
  :hook ((org-mode . flyspell-mode)
	 (text-mode . flyspell-mode)
	 (prog-mode . flyspell-prog-mode)))
#+end_src
** terminal
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package eshell
  :custom
  (eshell-banner-message "")
  :hook
  (eshell-first-time-mode-hook . #'eat-eshell-visual-command-mode)
  (eshell-first-time-mode-hook . #'eat-eshell-mode))
#+end_src
** pdf
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package pdf-tools
  :magic ("%PDF" . pdf-view-mode)
  :custom (pdf-view-display-size 'fit-height)
  :hook (pdf-view-mode . pdf-view-themed-minor-mode)
  :config
  (pdf-tools-install)
  (pdf-loader-install))
(use-package saveplace-pdf-view
  :after (:any pdf-tools doc-view)
  :demand t)
#+end_src
** emms
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package emms
  :custom
  (emms-repeat-playlist t)
  (emms-source-file-default-directory "~/silence/night/")
  (emms-history-file nil)
  (emms-cache-file nil)
  (emms-player-mpv-parameters '("--quiet" "--really-quiet" "--no-audio-display" "--speed=1"))
  (emms-player-list '(emms-player-mpg321
		      emms-player-ogg123
		      emms-player-mpv))
  :config
  (require 'emms-player-simple)
  (require 'emms-source-file)
  (require 'emms-source-playlist)
  (emms-minimalistic))
#+end_src
** helpful
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package helpful
  :bind (("C-h f" . helpful-callable)
	 ("C-h v" . helpful-variable)
	 ("C-h k" . helpful-key)
	 ("C-h x" . helpful-command)))
#+end_src
** chess
idk why stockfish isn't playing
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package chess
  :custom
  (chess-default-engine #'chess-gnuchess)
  (chess-default-display #'chess-ics1))
#+end_src
* dev
** auto-complete
minibuffer - flex is like fuzzy finding
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package completion-preview
  :custom
  (global-completion-preview-mode t)
  :config
  (push 'org-self-insert-command completion-preview-commands))
(use-package minibuffer
  :custom
  (completion-styles '(flex))
  (completion-auto-help nil))
(use-package ido
  :custom
  (ido-mode nil))
(use-package icomplete
  :custom
  (fido-vertical-mode t))
(use-package savehist
  :custom
  (history-length 50)
  (history-delete-duplicates t)
  :hook minibuffer-mode)
(use-package cape
  :init
  (add-hook 'completion-at-point-functions #'cape-dabbrev)
  (add-hook 'completion-at-point-functions #'cape-file)
  (add-hook 'completion-at-point-functions #'cape-dict)
  (add-hook 'completion-at-point-functions #'cape-history))
(use-package marginalia
  :hook minibuffer-mode)
#+end_src
** gptel
#+begin_src emacs-lisp :tangle "~/.config/emacs/init.el" :mkdirp yes
(use-package gptel
  :config
	(gptel-make-ollama "Ollama"
		:host "localhost:11434"
		:stream t
		:models '(tinyllama:latest)))
#+end_src
